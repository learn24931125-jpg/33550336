<H1>æ™ºæ…§æ—…éŠå°è¦½</H1>
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ™ºæ…§æ—…éŠå°è¦½ç³»çµ± - æŸ”å’Œäºå…‹åŠ› (Neumorphism) - äº’å‹•ç‰ˆ</title>
    <style>
        /* CSS ä¿æŒä¸è®Šï¼Œèˆ‡ä¸Šä¸€å€‹å›ç­”ç›¸åŒï¼Œç¢ºä¿ Neumorphism é¢¨æ ¼ */
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Noto+Sans+TC:wght@300;500&display=swap');

        :root {
            --bg-color: #E0E5EC;
            --light-shadow: #FFFFFF;
            --dark-shadow: #A3B1C6;
            --main-text: #6D7D9A;
            --accent-color: #4B7BEC;
            --accent-light: #6A99FF;
            --accent-dark: #3759A3;
            --component-color: #E0E5EC;
            --border-radius: 15px;
            --success-color: #4CAF50; /* æ–°å¢æˆåŠŸè‰² */
            --error-color: #F44336;   /* æ–°å¢éŒ¯èª¤è‰² */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans TC', 'Quicksand', sans-serif;
            color: var(--main-text);
        }

        body {
            background-color: var(--bg-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 30px;
        }

        /* æ ¸å¿ƒï¼šæŸ”å’Œäºå…‹åŠ› (Neumorphism) æµ®èµ·æ•ˆæœ */
        .neumorphic-float {
            background: var(--component-color);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 
                8px 8px 16px var(--dark-shadow),
                -8px -8px 16px var(--light-shadow);
            transition: all 0.3s ease;
        }
        /* é»æ“Šæµ®èµ·å…ƒä»¶æ™‚çš„äº’å‹•æ•ˆæœ */
        .neumorphic-float:hover:not(.attraction-card) {
             box-shadow: 
                6px 6px 12px var(--dark-shadow),
                -6px -6px 12px var(--light-shadow);
        }

        /* æ ¸å¿ƒï¼šæŸ”å’Œäºå…‹åŠ› (Neumorphism) å‡¹é™·æ•ˆæœ */
        .neumorphic-concave {
            background: var(--component-color);
            border-radius: 10px;
            box-shadow: 
                inset 5px 5px 10px var(--dark-shadow),
                inset -5px -5px 10px var(--light-shadow);
            padding: 10px;
            transition: all 0.3s ease;
        }

        /* æ¨™é¡Œå€ (ç•¥) */
        .header {text-align: center; margin-bottom: 30px;}
        .header h1 {
            font-family: 'Quicksand', sans-serif; font-size: 2.5em;
            color: var(--accent-color); text-shadow: 2px 2px 4px var(--dark-shadow);
            margin-bottom: 5px;
        }

        /* è¼¸å…¥æ¡†å’Œä¸‹æ‹‰é¸å–® (ç•¥) */
        .input-group input, .input-group select {
            width: 100%; border: none; background: none; outline: none;
            padding: 10px 15px; font-size: 1em; margin-top: 5px;
        }
        
        /* æ‡‰ç”¨å‡¹é™·æ•ˆæœåˆ°è¼¸å…¥æ¬„ä½ */
        .input-wrapper {
            background: var(--component-color);
            border-radius: 10px;
            box-shadow: 
                inset 3px 3px 6px var(--dark-shadow), 
                inset -3px -3px 6px var(--light-shadow);
            padding: 5px;
            position: relative; /* ç”¨æ–¼æ”¾ç½®é©—è­‰åœ–æ¨™ */
        }
        
        .input-wrapper input:focus {
            box-shadow: 
                inset 3px 3px 6px var(--accent-dark), 
                inset -3px -3px 6px var(--accent-light);
        }
        
        /* æŒ‰éˆ•æ¨£å¼ (ç•¥) */
        .neumorphic-button {
            background: var(--component-color); border: none; border-radius: 10px;
            padding: 10px 20px; font-size: 1em; font-weight: 600; cursor: pointer;
            box-shadow: 5px 5px 10px var(--dark-shadow), -5px -5px 10px var(--light-shadow);
            color: var(--accent-color); transition: all 0.2s ease;
        }

        .neumorphic-button:hover {
            color: var(--main-text);
            box-shadow: 3px 3px 6px var(--dark-shadow), -3px -3px 6px var(--light-shadow);
        }
        
        .neumorphic-button:active {
            box-shadow: inset 5px 5px 10px var(--dark-shadow), inset -5px -5px 10px var(--light-shadow);
            color: var(--main-text);
        }
        
        /* é©—è­‰åœ–æ¨™æ¨£å¼ */
        .validation-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .validation-icon.success { background-color: var(--success-color); color: white; }
        .validation-icon.error { background-color: var(--error-color); color: white; }

        /* API è¨­å®šå€ (ç•¥) */
        .api-settings {display: flex; gap: 20px;}
        .input-group {flex: 1;}

        /* åœ‹å®¶é¸å–®å€ (ç•¥) */
        .controls {display: flex; gap: 20px; align-items: center;}
        .controls label {white-space: nowrap;}

        /* ä½ˆå±€å®¹å™¨ (ç•¥) */
        .main-content {display: grid; grid-template-columns: 2fr 1fr; gap: 30px;}
        .attraction-list h2 {color: var(--main-text); margin-bottom: 20px; font-family: 'Quicksand', sans-serif;}

        /* æ™¯é»å¡ç‰‡å€ */
        .attraction-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            min-height: 400px; /* ç¢ºä¿åœ¨ç„¡å…§å®¹æ™‚ä»æœ‰ç©ºé–“ */
            align-content: start; /* å…§å®¹ç½®é ‚ */
        }
        
        /* æ™¯é»å¡ç‰‡ç‰¹æ®Šæ¨£å¼ (å¯é»æ“Š) */
        .attraction-card {
            cursor: pointer; /* å¢åŠ å¯é»æ“Šæç¤º */
        }
        .attraction-card.active {
            /* è¢«é¸ä¸­æ™‚å‘ˆç¾å‡¹é™·æ•ˆæœ */
            box-shadow: 
                inset 5px 5px 10px var(--dark-shadow),
                inset -5px -5px 10px var(--light-shadow);
            background-color: #DDE5F0; /* ç•¥å¾®è®Šè‰² */
        }

        .card-image {
            width: 100%; height: 180px; margin-bottom: 10px;
            display: flex; align-items: center; justify-content: center;
            font-style: italic; font-size: 0.9em; background: var(--component-color);
            border-radius: 10px;
            box-shadow: inset 3px 3px 6px var(--dark-shadow), inset -3px -3px 6px var(--light-shadow);
            overflow: hidden;
        }

        /* åœ–ç‰‡ä½”ä½ç¬¦æ–‡æœ¬æ¨£å¼ */
        .card-image span {
            color: var(--main-text);
            padding: 10px;
            text-align: center;
        }

        .card-image img {
            width: 100%; height: 100%; object-fit: cover;
            border-radius: 10px;
        }

        /* åœ°åœ–å±•ç¤ºå€ */
        .map-frame {
            height: 400px; padding: 20px;
            /* åœ°åœ–æ¡†ä½¿ç”¨å‡¹é™·æ•ˆæœï¼Œæ¨¡æ“¬åµŒå…¥å¼è¢å¹• (å·²åœ¨ä¸Šé¢å®šç¾©) */
            box-shadow: inset 10px 10px 20px var(--dark-shadow), inset -10px -10px 20px var(--light-shadow);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-weight: 600; font-size: 1.1em; text-align: center;
        }
        .map-frame p { margin-bottom: 5px; }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ (ç•¥) */
        @media (max-width: 1024px) {
            .main-content {grid-template-columns: 1fr;}
            .api-settings {flex-direction: column;}
            .map-display {order: -1;}
        }
    </style>
</head>
<body>

    <header class="header">
        <h1>AI æ™ºæ…§æ—…éŠå°è¦½ç³»çµ±</h1>
        <p>Soft Acrylic Interface for Immersive Travel</p>
    </header>

    <div class="api-settings neumorphic-float">
        <div class="input-group">
            <label for="ai-key">Gemini API Key (æ™¯é»ä»‹ç´¹/åœ–ç‰‡ç”Ÿæˆ)</label>
            <div class="input-wrapper">
                <input type="password" id="ai-key" placeholder="è¼¸å…¥æ‚¨çš„ Gemini API Key" oninput="validateApiKey('ai-key', 'ai-validation')">
                <div id="ai-validation" class="validation-icon" style="display: none;"></div>
            </div>
        </div>
        <div class="input-group">
            <label for="map-key">Map Key (åœ°åœ–é¡¯ç¤º)</label>
            <div class="input-wrapper">
                <input type="password" id="map-key" placeholder="è¼¸å…¥æ‚¨çš„åœ°åœ– API Key" oninput="validateApiKey('map-key', 'map-validation')">
                <div id="map-validation" class="validation-icon" style="display: none;"></div>
            </div>
        </div>
    </div>

    <div class="controls neumorphic-float">
        <label for="country-select">é¸æ“‡åœ‹å®¶/åœ°å€:</label>
        <div class="input-group" style="flex: 1;">
            <div class="input-wrapper">
                <select id="country-select">
                    <option value="" selected disabled>è«‹é¸æ“‡</option>
                    <option value="japan">æ—¥æœ¬</option>
                    <option value="korea">éŸ“åœ‹</option>
                    <option value="taiwan">å°ç£</option>
                    <option value="usa">ç¾åœ‹</option>
                </select>
            </div>
        </div>
        <button class="neumorphic-button" id="generate-attractions-btn" disabled>ç”Ÿæˆæ¨è–¦æ™¯é»</button>
    </div>

    <div class="main-content">
        <div class="attraction-list">
            <h2 id="attraction-title">æ™¯é»å¡ç‰‡å€ (è«‹å…ˆé¸æ“‡åœ‹å®¶)</h2>
            <div class="attraction-cards" id="attraction-cards-container">
                <p style="text-align: center; margin-top: 50px;">é»æ“Šä¸Šæ–¹ã€Œç”Ÿæˆæ¨è–¦æ™¯é»ã€æŒ‰éˆ•å¾Œï¼ŒAI æ¨è–¦çš„æ™¯é»å°‡é¡¯ç¤ºåœ¨æ­¤è™•ã€‚</p>
            </div>
        </div>
        
        <div class="map-display">
            <h2 id="map-title">åœ°åœ–å±•ç¤ºå€</h2>
            <div class="map-frame" id="map-frame">
                <p id="map-info-name" style="color: var(--accent-color); font-size: 1.5em; margin-bottom: 20px;">AI å°è¦½åœ°åœ–</p>
                <p id="map-info-desc">é»æ“Šå·¦å´æ™¯é»å¡ç‰‡ï¼Œåœ¨åœ°åœ–å€æŸ¥çœ‹è©³ç´°è³‡è¨Šå’Œæ¨¡æ“¬åº§æ¨™ã€‚</p>
                <p id="map-info-coords" style="font-size: 0.9em; margin-top: 15px;">æ¨¡æ“¬åº§æ¨™ï¼šN/A, E/A</p>
                <p id="map-api-placeholder" style="font-size: 0.7em; margin-top: 10px; color: var(--main-text); opacity: 0.7;">(æ­¤è™•ç‚ºåœ°åœ– API é¡¯ç¤ºå€åŸŸ)</p>
            </div>
        </div>
    </div>

<script>
    // =========================================================
    // æ¨¡æ“¬æ•¸æ“šåº« (å¯¦éš›æ‡‰ç”¨ä¸­æ‡‰ç”± Gemini API ç”Ÿæˆ)
    // =========================================================
    const MOCK_ATTRACTIONS = {
        japan: [
            { id: 1, name: "æ±äº¬æ™´ç©ºå¡”", description: "é«˜è³å…¥é›²çš„å»£æ’­å¡”ï¼Œæ˜¯æ±äº¬çš„æ–°åœ°æ¨™ï¼Œèƒ½ä¿¯ç°æ•´å€‹é—œæ±å¹³åŸã€‚", lat: 35.71, lon: 139.81 },
            { id: 2, name: "ä¼è¦‹ç¨»è·å¤§ç¤¾", description: "äº¬éƒ½çš„ä»£è¡¨æ€§ç¥ç¤¾ï¼Œä»¥ç¶¿å»¶ä¸çµ•çš„æœ±ç´…è‰²ã€Œåƒæœ¬é³¥å±…ã€èåã€‚", lat: 34.96, lon: 135.77 },
            { id: 3, name: "åš´å³¶ç¥ç¤¾", description: "ä½æ–¼æµ·ä¸Šï¼Œä»¥ã€Œæµ·ä¸Šé³¥å±…ã€èåçš„ä¸–ç•Œéºç”¢ï¼Œæ½®æ±æ™¯è§€è¿·äººã€‚", lat: 34.29, lon: 132.32 }
        ],
        taiwan: [
            { id: 4, name: "å°åŒ—101", description: "æ›¾æ˜¯ä¸–ç•Œç¬¬ä¸€é«˜æ¨“ï¼Œè¨­è¨ˆèå…¥ç«¹å­ç¯€ç¯€é«˜å‡çš„æ„è±¡ï¼Œæ˜¯å°ç£çš„ä»£è¡¨æ€§å»ºç¯‰ã€‚", lat: 25.03, lon: 121.56 },
            { id: 5, name: "å¤ªé­¯é–£åœ‹å®¶å…¬åœ’", description: "å£¯éº—çš„å¤§ç†çŸ³å³½è°·æ™¯è§€ï¼Œæ¶µè“‹é«˜å±±åˆ°æµ·æ´‹å¤šæ¨£ç”Ÿæ…‹ï¼Œæ˜¯ä¸–ç•Œç´šçš„è‡ªç„¶å¥‡è§€ã€‚", lat: 24.16, lon: 121.63 },
            { id: 6, name: "æ—¥æœˆæ½­", description: "å°ç£æœ€å¤§çš„å¤©ç„¶æ¹–æ³Šï¼Œæ¹–å…‰å±±è‰²è¿·äººï¼Œä»¥æ‹‰é­¯å³¶ç‚ºç•Œåˆ†ç‚ºæ—¥æ½­èˆ‡æœˆæ½­ã€‚", lat: 23.83, lon: 120.91 }
        ],
        korea: [
            { id: 7, name: "æ™¯ç¦å®®", description: "æœé®®ç‹æœçš„æ­£å®®ï¼Œæ˜¯éŸ“åœ‹äº”å¤§å®®é—•ä¸­è¦æ¨¡æœ€å¤§ã€å»ºç¯‰æœ€ç¾çš„ã€‚", lat: 37.58, lon: 126.97 },
            { id: 8, name: "é‡œå±±æµ·é›²å°", description: "éŸ“åœ‹æœ€è‘—åçš„æµ·ç˜ä¹‹ä¸€ï¼Œä»¥ç¾éº—çš„æµ·å²¸ç·šå’Œå¤æ—¥ç¥­å…¸èåã€‚", lat: 35.16, lon: 129.13 }
        ],
        usa: [
            { id: 9, name: "å¤§å³½è°·åœ‹å®¶å…¬åœ’", description: "ç§‘ç¾…æ‹‰å¤šæ²³æ²–åˆ·å½¢æˆçš„å·¨å¤§å³½è°·ï¼Œæ“æœ‰ä»¤äººé©šå˜†çš„å²©å±¤å’Œåœ°è³ªæ™¯è§€ã€‚", lat: 36.10, lon: -112.11 },
            { id: 10, name: "è‡ªç”±å¥³ç¥åƒ", description: "ä½æ–¼ç´ç´„æ¸¯çš„è‡ªç”±å³¶ä¸Šï¼Œè±¡å¾µè‡ªç”±èˆ‡æ°‘ä¸»ã€‚", lat: 40.69, lon: -74.04 }
        ]
    };

    let selectedAttraction = null; // å„²å­˜ç•¶å‰è¢«é¸ä¸­çš„æ™¯é»å°è±¡
    let apiKeysValid = { 'ai-key': false, 'map-key': false }; // è¿½è¹¤ Key ç‹€æ…‹

    // =========================================================
    // 1. API Key é©—è­‰æ¨¡æ“¬
    // =========================================================
    const generateBtn = document.getElementById('generate-attractions-btn');

    /**
     * æ¨¡æ“¬ API Key é©—è­‰ä¸¦æ›´æ–°è¦–è¦ºå›é¥‹
     * @param {string} inputId - è¼¸å…¥æ¡†çš„ ID
     * @param {string} iconId - é©—è­‰åœ–æ¨™çš„ ID
     */
    function validateApiKey(inputId, iconId) {
        const input = document.getElementById(inputId);
        const icon = document.getElementById(iconId);
        const value = input.value.trim();

        icon.style.display = 'flex';
        let isValid = false;

        // æ¨¡æ“¬é©—è­‰é‚è¼¯ï¼šåªè¦è¼¸å…¥é•·åº¦å¤§æ–¼ 10 å°±ç®—æˆåŠŸ (å¯¦éš›æ‡‰ç™¼é€ API è«‹æ±‚)
        if (value.length > 10) {
            icon.className = 'validation-icon success';
            icon.textContent = 'âœ“';
            isValid = true;
        } else {
            icon.className = 'validation-icon error';
            icon.textContent = 'âœ—';
        }
        
        // æ›´æ–° Key ç‹€æ…‹
        apiKeysValid[inputId] = isValid;

        // æª¢æŸ¥æ˜¯å¦æ‰€æœ‰å¿…è¦çš„ Key éƒ½å·²é©—è­‰
        updateGenerateButtonState();
    }

    /**
     * æ›´æ–°ã€Œç”Ÿæˆæ¨è–¦æ™¯é»ã€æŒ‰éˆ•çš„å¯é»æ“Šç‹€æ…‹
     */
    function updateGenerateButtonState() {
        const isReady = apiKeysValid['ai-key'] && apiKeysValid['map-key'] && document.getElementById('country-select').value !== "";
        generateBtn.disabled = !isReady;
        generateBtn.style.opacity = isReady ? 1 : 0.6;
    }
    
    // ç›£è½åœ‹å®¶é¸å–®è®ŠåŒ–ï¼Œæ›´æ–°æŒ‰éˆ•ç‹€æ…‹
    document.getElementById('country-select').addEventListener('change', updateGenerateButtonState);


    // =========================================================
    // 2. & 3. åœ‹å®¶é¸æ“‡èˆ‡å‹•æ…‹ç”Ÿæˆæ™¯é»
    // =========================================================
    
    document.getElementById('generate-attractions-btn').addEventListener('click', () => {
        const countrySelect = document.getElementById('country-select');
        const selectedCountry = countrySelect.value;
        const container = document.getElementById('attraction-cards-container');
        const countryText = countrySelect.options[countrySelect.selectedIndex].text;

        // 1. æ¸…ç©ºèˆŠå¡ç‰‡
        container.innerHTML = '';
        document.getElementById('attraction-title').textContent = `${countryText} æ¨è–¦æ™¯é» (AI ç”Ÿæˆä¸­...)`;

        // 2. æ¨¡æ“¬ API å»¶é²
        setTimeout(() => {
            if (!selectedCountry || !MOCK_ATTRACTIONS[selectedCountry]) {
                container.innerHTML = `<p style="text-align: center; margin-top: 50px;">æŠ±æ­‰ï¼Œæ‰¾ä¸åˆ° ${countryText} çš„æ™¯é»æ•¸æ“šã€‚</p>`;
                document.getElementById('attraction-title').textContent = `æ™¯é»å¡ç‰‡å€ (é¸æ“‡åœ‹å®¶)`;
                return;
            }

            const attractions = MOCK_ATTRACTIONS[selectedCountry];
            
            // 3. æ¸²æŸ“æ–°å¡ç‰‡
            attractions.forEach(attraction => {
                const card = createAttractionCard(attraction);
                container.appendChild(card);
            });

            document.getElementById('attraction-title').textContent = `${countryText} AI æ¨è–¦æ™¯é»`;
            selectedAttraction = null; // æ¸…é™¤é¸ä¸­çš„æ™¯é»
            updateMapDisplay(); // æ¸…ç©ºåœ°åœ–è³‡è¨Š
        }, 1000); // æ¨¡æ“¬ 1 ç§’ API å»¶é²
    });

    /**
     * å‰µå»ºå–®å€‹æ™¯é»å¡ç‰‡ DOM å…ƒç´ 
     * @param {object} attraction - æ™¯é»æ•¸æ“šå°è±¡
     * @returns {HTMLElement}
     */
    function createAttractionCard(attraction) {
        const card = document.createElement('div');
        card.className = 'attraction-card neumorphic-float';
        card.dataset.id = attraction.id;
        card.setAttribute('tabindex', 0); // è®“å¡ç‰‡å¯è¢«èšç„¦

        card.innerHTML = `
            <h3>${attraction.name}</h3>
            <div class="card-image">
                <span>é»æ“Šã€Œç”Ÿæˆåœ–ç‰‡ã€<br>å‘¼å« Gemini API æ¸²æŸ“ (Placeholder)</span>
            </div>
            <p class="card-description">
                ${attraction.description}
            </p>
            <div class="card-actions" style="display: flex; gap: 10px;">
                <button class="neumorphic-button" style="flex: 1;" onclick="handleVoicePlayback(event, ${attraction.id})">æ’­æ”¾èªéŸ³å°è¦½</button>
                <button class="neumorphic-button" style="flex: 1;" onclick="handleImageGeneration(event, ${attraction.id})">ç”Ÿæˆåœ–ç‰‡</button>
            </div>
        `;
        
        // 4. é»æ“Šå¡ç‰‡å¾Œé¡¯ç¤ºä»‹ç´¹èˆ‡åœ°åœ–åº§æ¨™
        card.addEventListener('click', (e) => {
             // ç¢ºä¿é»æ“ŠæŒ‰éˆ•æ™‚ä¸æœƒè§¸ç™¼å¡ç‰‡é»æ“Šäº‹ä»¶
            if (e.target.closest('button')) return;
            
            // æ‰¾åˆ°æ‰€æœ‰å¡ç‰‡ä¸¦ç§»é™¤ active ç‹€æ…‹
            document.querySelectorAll('.attraction-card').forEach(c => c.classList.remove('active'));
            
            // çµ¦ç•¶å‰å¡ç‰‡ active ç‹€æ…‹
            card.classList.add('active');
            
            selectedAttraction = attraction;
            updateMapDisplay();
        });

        return card;
    }
    
    /**
     * æ›´æ–°åœ°åœ–å±•ç¤ºå€çš„å…§å®¹
     */
    function updateMapDisplay() {
        const nameEl = document.getElementById('map-info-name');
        const descEl = document.getElementById('map-info-desc');
        const coordsEl = document.getElementById('map-info-coords');

        if (selectedAttraction) {
            nameEl.textContent = selectedAttraction.name;
            // å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œé€™æ®µæè¿°æœƒé€éåœ°åœ– API æ¸²æŸ“åœ°åœ–
            descEl.innerHTML = `<strong>æ™¯é»ä»‹ç´¹:</strong> ${selectedAttraction.description.substring(0, 40)}...`;
            coordsEl.textContent = `æ¨¡æ“¬åº§æ¨™: N ${selectedAttraction.lat}Â° , E ${selectedAttraction.lon}Â°`;
            // é€™è£¡å¯ä»¥å‘¼å« Map API æ¸²æŸ“åœ°åœ–
        } else {
            nameEl.textContent = "AI å°è¦½åœ°åœ–";
            descEl.textContent = "è«‹é»æ“Šå·¦å´æ™¯é»å¡ç‰‡ï¼ŒæŸ¥çœ‹è©³ç´°è³‡è¨Šã€‚";
            coordsEl.textContent = "æ¨¡æ“¬åº§æ¨™: N/A, E/A";
        }
    }


    // =========================================================
    // 5. åŠŸèƒ½æŒ‰éˆ• (ç”Ÿæˆåœ–ç‰‡èˆ‡èªéŸ³æ’­æ”¾) æ¨¡æ“¬
    // =========================================================
    
    /**
     * æ¨¡æ“¬èªéŸ³æ’­æ”¾åŠŸèƒ½
     */
    function handleVoicePlayback(event, attractionId) {
        event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°å¡ç‰‡é»æ“Šäº‹ä»¶
        const attraction = findAttractionById(attractionId);
        
        alert(`â–¶ï¸ æ­£åœ¨æ’­æ”¾ ${attraction.name} çš„èªéŸ³å°è¦½... \n\n[å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œæ‚¨æœƒåœ¨é€™è£¡å‘¼å« TTS (Text-to-Speech) APIï¼Œå°‡æ™¯é»æè¿°è½‰æ›ç‚ºéŸ³æª”ä¸¦æ’­æ”¾ã€‚]`);
    }

    /**
     * æ¨¡æ“¬åœ–ç‰‡ç”ŸæˆåŠŸèƒ½
     */
    function handleImageGeneration(event, attractionId) {
        event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°å¡ç‰‡é»æ“Šäº‹ä»¶
        const attraction = findAttractionById(attractionId);
        const card = event.target.closest('.attraction-card');
        const imageContainer = card.querySelector('.card-image');

        imageContainer.innerHTML = '<span>åœ–ç‰‡ç”Ÿæˆä¸­... ğŸ¤–</span>';

        // å¯¦éš›æ‡‰ç”¨ä¸­ï¼š
        // 1. å‘¼å« Gemini Image Generation API (å¦‚ Imagen)
        // 2. å‚³å…¥ attraction.description ä½œç‚ºæç¤ºè© (Prompt)
        // 3. ç²å–åœ–ç‰‡ URL
        
        // æ¨¡æ“¬åœ–ç‰‡ç”Ÿæˆå»¶é²
        setTimeout(() => {
            // æ¨¡æ“¬åœ–ç‰‡ URL
            const mockImageUrl = `https://picsum.photos/seed/${attractionId}/280/180`;
            imageContainer.innerHTML = `<img src="${mockImageUrl}" alt="${attraction.name} - AI ç”Ÿæˆåœ–ç‰‡">`;
            alert(`âœ… æˆåŠŸç‚º ${attraction.name} ç”Ÿæˆåœ–ç‰‡ï¼\n\n[å¯¦éš›åœ–ç‰‡å·²è¼‰å…¥ Placeholder Image]`);
        }, 2000); // æ¨¡æ“¬ 2 ç§’ç”Ÿæˆæ™‚é–“
    }
    
    /**
     * è¼”åŠ©å‡½æ•¸ï¼šæ ¹æ“š ID æŸ¥æ‰¾æ™¯é»
     */
    function findAttractionById(id) {
        for (const country in MOCK_ATTRACTIONS) {
            const attraction = MOCK_ATTRACTIONS[country].find(att => att.id === id);
            if (attraction) return attraction;
        }
        return null;
    }

    // åˆå§‹åŒ–æª¢æŸ¥æŒ‰éˆ•ç‹€æ…‹
    document.addEventListener('DOMContentLoaded', () => {
        // ç¢ºä¿å‰›è¼‰å…¥é é¢æ™‚ï¼ŒæŒ‰éˆ•æ˜¯ç¦ç”¨çš„
        updateGenerateButtonState(); 
        
        // åˆå§‹ç‹€æ…‹ï¼šKey è¼¸å…¥æ¡†ç‚ºç©ºï¼Œé¡¯ç¤ºéŒ¯èª¤åœ–æ¨™
        validateApiKey('ai-key', 'ai-validation');
        validateApiKey('map-key', 'map-validation');
    });

</script>

</body>
</html>
